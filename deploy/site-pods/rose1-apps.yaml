# Site-specific pods for rose1
# Apply via: kubectl --server=http://rose1.gw.lo:8082 apply -f rose1-apps.yaml

---
apiVersion: v1
kind: Pod
metadata:
  name: agentmonitor-g10
  namespace: monitoring
  annotations:
    vkube.io/network: g10
    vkube.io/image-policy: auto
spec:
  restartPolicy: Always
  containers:
    - name: monitor
      image: 192.168.200.2:5000/agent-monitor:edge
      command: ["/agent-monitor"]

---
apiVersion: v1
kind: Pod
metadata:
  name: ipmiserial
  namespace: infra
  annotations:
    vkube.io/network: g10
    vkube.io/image-policy: auto
spec:
  restartPolicy: Always
  containers:
    - name: ipmiserial
      image: ghcr.io/glennswest/ipmiserial:edge
      livenessProbe:
        httpGet:
          path: /
          port: 80
        periodSeconds: 30
        failureThreshold: 3
      volumeMounts:
        - name: data
          mountPath: /var/lib/data
